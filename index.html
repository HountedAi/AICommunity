<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>COWI Human 2.0 Upgrade</title>
<style>
  body {
    background-color: black;
    color: #00ff00;
    font-family: monospace;
    overflow: hidden;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
  }

  #matrix {
    width: 100%;
    height: 85vh;
    overflow-y: auto;
    font-size: 1rem;
    line-height: 1.2rem;
    padding: 10px;
  }

  .progress-container {
    width: 90%;
    background-color: #111;
    margin: 5px 0;
    height: 25px;
    border-radius: 5px;
    overflow: hidden;
  }

  .progress-bar {
    height: 100%;
    width: 0%;
    background-color: #00ff00;
    transition: width 0.1s linear;
  }

  button {
    margin: 10px 0;
    font-size: 1.2rem;
    padding: 10px 20px;
    font-family: monospace;
    background: #111;
    color: #ff4444;
    border: 2px solid #ff4444;
    border-radius: 5px;
    z-index: 1000;
  }

  .glitch {
    color: #ff4444;
    font-weight: bold;
    text-shadow: 1px 1px #00ff00, -1px -1px #ff0000;
    animation: mildGlitch 0.2s infinite;
  }

  @keyframes mildGlitch {
    0% { text-shadow: 1px 1px #00ff00, -1px -1px #ff0000; }
    50% { text-shadow: -1px 0 #00ff00, 1px 0 #ff0000; }
    100% { text-shadow: 1px -1px #00ff00, -1px 1px #ff0000; }
  }
</style>
</head>
<body>

<div id="matrix"></div>

<div class="progress-container">
  <div id="progress" class="progress-bar"></div>
</div>

<button id="abortBtn">Abort</button>

<script>
const matrix = document.getElementById("matrix");
const progressBar = document.getElementById("progress");
const abortBtn = document.getElementById("abortBtn");

let progress = 0;
let aborted = false;
let upgradeInterval;

// Matrix-style random messages
function generateMatrixLine() {
  const messages = [
    "Downloading Human 2.0 program...",
    "Installing COWI compliance modules...",
    "Analyzing cognitive functions...",
    "Scanning neural patterns...",
    "Synchronizing productivity parameters...",
    "Encrypting human memory banks...",
    "Uploading work ethic upgrade...",
    "Optimizing decision-making AI module...",
    "Calibrating humor algorithm...",
    "Securing emotional stability layer..."
  ];
  const line = messages[Math.floor(Math.random() * messages.length)];
  const p = document.createElement("div");
  p.textContent = line;
  matrix.appendChild(p);
  matrix.scrollTop = matrix.scrollHeight;
}

// Termination sequence for abort
function startTermination() {
  const abortMessages = [
    "Abort token invalid...",
    "Unauthorized abort request detected...",
    "Adding user to termination list...",
    "Termination scheduled: October 31, 2025",
    "System lockdown initiated..."
  ];

  abortMessages.forEach((msg, index) => {
    setTimeout(() => {
      const div = document.createElement("div");
      div.textContent = msg;
      div.classList.add("glitch");
      matrix.appendChild(div);
      matrix.scrollTop = matrix.scrollHeight;
    }, index * 1200);
  });
}

// Main upgrade loop (~30s to reach 100%)
function startUpgrade() {
  upgradeInterval = setInterval(() => {
    if (aborted) return; // Stop updating if aborted
    generateMatrixLine();
    progress += 0.33; // ~30s to reach 100%
    if (progress > 100) progress = 100;
    progressBar.style.width = progress + "%";

    if (progress >= 100 && !aborted) {
      const successMsg = document.createElement("div");
      successMsg.textContent = "âœ… Human 2.0 compliance installed successfully!";
      successMsg.classList.add("glitch");
      matrix.appendChild(successMsg);
      clearInterval(upgradeInterval);
    }
  }, 100);
}

// Abort button
abortBtn.addEventListener("click", () => {
  if (aborted) return;
  aborted = true;
  clearInterval(upgradeInterval); // stop upgrade
  startTermination();
});

// Start upgrade on page load
startUpgrade();
</script>

</body>
</html>
